<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>README AI - Setup</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>Readme Automation - How to Use</h1>

        <div class="step">
            <h3>Step 1: Add OpenAI API Key</h3>
            <p>If you don't have a key, you can sign up and create one at <a href="https://platform.openai.com/signup"
                    target="_blank">OpenAI</a></p>
            <p>Go to repo â†’ Settings â†’ Secrets â†’ Actions</p>
            <p>Click "New repository secret"</p>
            <p>Name: <code>OPENAI_API_KEY</code></p>
            <p>Value: (paste your key)</p>
        </div>

        <div class="step">
            <h3>Step 2: Copy This File</h3>
            <p>Create <code>.github/workflows/readme.yml</code> in your repo:</p>
            <div class="code-container">
                <textarea id="workflow" readonly>
name: Update README
on: [push]

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - uses: CSCI-40500-Fall-2025/project-project-15@v1
        with:
          openai-api-key: ${{ secrets.OPENAI_API_KEY }}
      
      - name: Commit and push updated README
        run: |
          git config --local user.name 'github-actions[bot]'
          git config --local user.email 'github-actions[bot]@users.noreply.github.com'
          git add README.md
          git diff --staged --quiet || git commit -m "Auto-update README [skip ci]"
          git push
                </textarea>
                <button class="copy-button" id="copyButton" aria-label="Copy code to clipboard">
                    <span class="copy-text">ðŸ“‹ Copy</span>
                    <span class="copy-success" style="display: none;">âœ“ Copied!</span>
                </button>
            </div>
        </div>

        <div class="step">
            <h3>Step 3: Push</h3>
            <pre class="command-block"><code>git add .github/workflows/readme.yml
git commit -m "Add README automation"
git push</code></pre>
        </div>

        <div class="step" id="metadata-section" style="display: none;">
            <h3>AI-Generated Project Metadata</h3>
            <div id="metadata-content">
                <p><strong>Category:</strong> <span id="metadata-category"></span></p>
                <p><strong>Type:</strong> <span id="metadata-type"></span></p>
                <p><strong>Tags:</strong> <span id="metadata-tags"></span></p>
                <p><strong>Tech Stack:</strong> <span id="metadata-tech"></span></p>
                <p><strong>Primary Language:</strong> <span id="metadata-language"></span></p>
                <p><strong>Description:</strong> <span id="metadata-description"></span></p>
                <p><em>Metadata generated automatically by ML component</em></p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Load and display project metadata if available
        fetch('../project_metadata.json')
            .then(response => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error('Metadata not found');
            })
            .then(data => {
                if (data.category) {
                    document.getElementById('metadata-section').style.display = 'block';
                    document.getElementById('metadata-category').textContent = data.category || 'N/A';
                    document.getElementById('metadata-type').textContent = data.project_type || 'N/A';
                    document.getElementById('metadata-tags').textContent = (data.tags || []).join(', ') || 'N/A';
                    document.getElementById('metadata-tech').textContent = (data.tech_stack || []).join(', ') || 'N/A';
                    document.getElementById('metadata-language').textContent = data.primary_language || 'N/A';
                    document.getElementById('metadata-description').textContent = data.description || 'N/A';
                }
            })
            .catch(error => {
                console.log('Metadata not available:', error);
            });
    </script>
</body>

</html>